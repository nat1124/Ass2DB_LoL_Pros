<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Danh s√°ch ng∆∞·ªùi ch∆°i</title>
    <link href="../../styles/style.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../../styles/headerStyle.css" />
    <link rel="stylesheet" href="../../styles/teamStyle.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <%- include('partial/header') %>
    <div class="search-container"> 
      <form action="/players" id="form" method="GET" style="display: inline-flex; width: 100%;"> 
        <input type="search" id="search-area" name="q" placeholder="Search" value="<%= query.search %>"  /> 
        <button type="submit"><span>üîç</span></button> 
      </form> 
      <button type="button" id="addPlayerBtn" class="addPlayerButton" onclick="window.location.href='/players/create'">Th√™m Player</button> 
    </div>
    <div class="players-container">
      <h1>Danh s√°ch ng∆∞·ªùi ch∆°i</h1>
      <form class="filter-container" action="/players" method="GET">
        <div>
          <label for="positionFilter">V·ªã tr√≠:</label>
          <select id="positionFilter" name="position" >
            <option value="all">T·∫•t c·∫£</option>
            <option value="TOP" <%= query.position === 'TOP' ? 'selected' : '' %>>Top</option>
            <option value="JUNG" <%= query.position === 'JUNG' ? 'selected' : '' %>>Jungle</option>
            <option value="MID" <%= query.position === 'MID' ? 'selected' : '' %>>Mid</option>
            <option value="AD" <%= query.position === 'AD' ? 'selected' : '' %>>AD Carry</option>
            <option value="SP" <%= query.position === 'SP' ? 'selected' : '' %>>Support</option>
          </select>
        </div>
        <div>
          <label for="statusFilter">Tr·∫°ng th√°i:</label>
          <select id="statusFilter" name="status">
            <option value="all">T·∫•t c·∫£</option>
            <option value="T·ª± do" <%= query.status === 'T·ª± do' ? 'selected' : '' %>>T·ª± do</option>
            <option value="C√≤n h·ª£p ƒë·ªìng" <%= query.status === 'C√≤n h·ª£p ƒë·ªìng' ? 'selected' : '' %>>C√≤n h·ª£p ƒë·ªìng</option>
          </select>
        </div>
        <input type="hidden" name="q" value="<%= query.search %>">
        <button type="submit">L·ªçc</button>
      </form>
      <table>
        <thead>
          <tr>
            <th>STT</th>
            <th >T√™n ng∆∞·ªùi ch∆°i</th>
            <th>T√™n ingame</th>
            <th >V·ªã tr√≠ </i></th>
            <th >Tu·ªïi </i></th>
            <th>Qu·ªëc gia</th>
            <th>Team hi·ªán t·∫°i</th>
          </tr>
        </thead>
        <tbody id="playerTableBody">
          <% players.forEach((player, index) => { %>
            <tr>
              <td><%= (currentPage - 1) * 10 + index + 1 %></td>
              <td> <%= player.playerLastMiddleName %> <%= player.playerFirstName %></td>
              <td><%= player.ingameName %></td>
              <td><%= player.role %></td>
              <td><%= new Date().getFullYear() - new Date(player.dob).getFullYear() %></td>
              <td><%= player.nationality %></td>
              <td><%= player.teamName %></td>
              
            </tr>
          <% }) %>
        </tbody>
      </table>
      <ul class="pagination">
        <% for(let i = 1; i <= totalPages; i++) { %>
          <li>
            <a href="?page=<%= i %>&position=<%= query.position %>&status=<%= query.status %>&q=<%= query.search %>" class="<%= currentPage === i ? 'active' : '' %>"><%= i %></a>
          </li>
        <% } %>
      </ul>
    </div>

    <script src="../../scripts/playerScript.js"></script>
  </body